
var request = require('request');

module.exports = function(appId, callback, urlBlock) {
    var getUrl = 'http://fir.im/api/upload_url' + '?appid=' + appId;

    console.log('Will get urls from: '.green + getUrl.underline);
    request(getUrl, function (error, response, body) {
        var json = [];

        if (!error && response.statusCode == 200) {
            console.log(('\nThe ' + appId + ' urls are:').green)

            json = JSON.parse(body);
            for (var k in json) {
                console.log('\t' + k.green + "\t\t\t: " + json[k]);
            }
            callback(0);
        } else {

            callback(1, error.toString());
        }

        if(urlBlock) {
            urlBlock(json['postFile'], json['postIcon'], json['short']);
        }

    })

}
